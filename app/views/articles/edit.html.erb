<div class="editor-page">
  <div class="container page">
    <div class="row">
      <div class="col-md-10 offset-md-1 col-xs-12">
        <ul class="error-messages">
          <li>That title is required</li>
        </ul>

        <form id="article-form">
          <fieldset>
            <fieldset class="form-group">
              <input type="text" id="article-title" class="form-control form-control-lg" placeholder="Article Title" required />
            </fieldset>
            <fieldset class="form-group">
              <input type="text" id="article-description" class="form-control" placeholder="What's this article about?" required />
            </fieldset>
            <fieldset class="form-group">
              <textarea
                id="article-body"
                class="form-control"
                rows="8"
                placeholder="Write your article (in markdown)"
                required
              ></textarea>
            </fieldset>
            <fieldset class="form-group">
              <input type="text" id="article-tags" class="form-control" placeholder="Enter tags" />
              <div class="tag-list">
                <span class="tag-default tag-pill"> <i class="ion-close-round"></i> tag </span>
              </div>
            </fieldset>
            <button id="publish-article-button" class="btn btn-lg pull-xs-right btn-primary" type="submit">
              Publish Article
            </button>
          </fieldset>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  document.getElementById('article-form').addEventListener('submit', function(event) {
    event.preventDefault(); // デフォルトのフォーム送信を防ぐ

    const title = document.getElementById('article-title').value;
    const description = document.getElementById('article-description').value;
    const body = document.getElementById('article-body').value;
    const tagList = document.getElementById('article-tags').value.split(',').map(tag => tag.trim());

    const articleData = {
      article: {
        title: title,
        description: description,
        body: body,
        tagList: tagList
      }
    };

    fetch('http://localhost:3000/api/articles', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json'
      },
      body: JSON.stringify(articleData)
    })
    .then(response => response.json())
    .then(data => {
      console.log('Success:', data);
      // 成功した場合の処理
      window.location.href = '/'; // ホーム画面にリダイレクト
    })
    .catch((error) => {
      console.error('Error:', error);
      // エラーが発生した場合の処理
    });
  });
</script>